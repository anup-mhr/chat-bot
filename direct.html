<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Direct Iframe Embedding</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        background-color: #f8fafc;
      }
      .content {
        max-width: 800px;
        margin: 40px auto;
        background: white;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #1e293b;
        margin-bottom: 20px;
      }
      p {
        color: #64748b;
        margin-bottom: 16px;
      }
      .button {
        display: inline-block;
        background-color: #3b82f6;
        color: white;
        padding: 10px 20px;
        border-radius: 4px;
        text-decoration: none;
        margin-top: 20px;
        cursor: pointer;
      }
      .button:hover {
        background-color: #2563eb;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <h1>Direct Iframe Embedding Example</h1>
      <p>
        This page demonstrates the improved embedding method that doesn't
        interfere with the website's content. The chatbot should appear as a
        floating icon in the bottom-right corner.
      </p>

      <p>
        You should be able to interact with all elements on this page normally.
        Try clicking the button below:
      </p>

      <button
        class="button"
        onclick="alert('Button clicked! This works because the chatbot iframe is not blocking the page content.')"
      >
        Click Me
      </button>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
        commodo consequat.
      </p>

      <p>
        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
        dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
      </p>
    </div>

    <!-- Chatbot Container -->
    <div
      id="chatbot-container"
      style="
        position: fixed;
        bottom: 0;
        right: 0;
        width: 0;
        height: 0;
        overflow: visible;
        z-index: 9999;
      "
    >
      <!-- Direct Iframe Embedding -->
      <iframe
        id="chatbot-iframe"
        src="http://localhost:3000"
        style="
          position: absolute;
          bottom: 0;
          right: 0;
          width: 85px;
          height: 85px;
          border: none;
          background: transparent;
        "
        title="AI Chatbot"
        scrolling="no"
        frameborder="0"
        allowtransparency="true"
      >
      </iframe>
    </div>

    <script>
      // Listen for messages from the iframe
      window.addEventListener("message", function (event) {
        if (event.data && event.data.type === "chatbot-state-change") {
          const iframe = document.getElementById("chatbot-iframe");
          const { isOpen } = event.data;

          // Resize iframe based on chatbot state
          if (isOpen) {
            // When open, make iframe larger to fit the chat window
            iframe.style.width = "420px"; // Enough for the chat window
            iframe.style.height = "85vh"; // 85% of viewport height
          } else {
            // When closed, make iframe small again
            iframe.style.width = "85px";
            iframe.style.height = "85px";
          }
        }
      });
    </script>
  </body>
</html>
